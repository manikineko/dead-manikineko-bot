import { AI } from "../../../.robo/build/core/ai.js";
import { logger } from "../../../.robo/build/core/logger.js";
export const config = {
    description: 'Bring your creative visions to life!',
    options: [
        {
            name: 'prompt',
            description: 'Describe your imaginative scene or concept for artistic creation',
            required: true
        }
    ]
};
export default (async (interaction)=>{
    const prompt = interaction.options.get('prompt')?.value;
    const response = await AI.generateImage({
        prompt
    });
    const images = response?.images?.map((image)=>image.url);
    logger.debug(`Imagined ${images?.length} images:`, images);
    if (!images?.length) {
        logger.warn('No images were generated.');
        return 'No images were generated.';
    }
    // Fetch image url as buffer then return as file
    const buffers = await Promise.all(images.map(async (image)=>{
        const response = await fetch(image);
        return Buffer.from(await response.arrayBuffer());
    }));
    return {
        files: buffers
    };
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL3JvYm8uanMvcm9iby5qcy9wYWNrYWdlcy9wbHVnaW4tYWkvc3JjL2NvbW1hbmRzL2ltYWdpbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQUkgfSBmcm9tICdAL2NvcmUvYWkuanMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL2NvcmUvbG9nZ2VyLmpzJ1xuaW1wb3J0IHsgQ29tbWFuZEludGVyYWN0aW9uIH0gZnJvbSAnZGlzY29yZC5qcydcbmltcG9ydCB7IENvbW1hbmRDb25maWcsIENvbW1hbmRSZXN1bHQgfSBmcm9tICdyb2JvLmpzJ1xuXG5leHBvcnQgY29uc3QgY29uZmlnOiBDb21tYW5kQ29uZmlnID0ge1xuXHRkZXNjcmlwdGlvbjogJ0JyaW5nIHlvdXIgY3JlYXRpdmUgdmlzaW9ucyB0byBsaWZlIScsXG5cdG9wdGlvbnM6IFtcblx0XHR7XG5cdFx0XHRuYW1lOiAncHJvbXB0Jyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnRGVzY3JpYmUgeW91ciBpbWFnaW5hdGl2ZSBzY2VuZSBvciBjb25jZXB0IGZvciBhcnRpc3RpYyBjcmVhdGlvbicsXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZVxuXHRcdH1cblx0XVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoaW50ZXJhY3Rpb246IENvbW1hbmRJbnRlcmFjdGlvbik6IFByb21pc2U8Q29tbWFuZFJlc3VsdD4gPT4ge1xuXHRjb25zdCBwcm9tcHQgPSBpbnRlcmFjdGlvbi5vcHRpb25zLmdldCgncHJvbXB0Jyk/LnZhbHVlIGFzIHN0cmluZ1xuXG5cdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQUkuZ2VuZXJhdGVJbWFnZSh7IHByb21wdCB9KVxuXHRjb25zdCBpbWFnZXMgPSByZXNwb25zZT8uaW1hZ2VzPy5tYXAoKGltYWdlKSA9PiBpbWFnZS51cmwpXG5cdGxvZ2dlci5kZWJ1ZyhgSW1hZ2luZWQgJHtpbWFnZXM/Lmxlbmd0aH0gaW1hZ2VzOmAsIGltYWdlcylcblxuXHRpZiAoIWltYWdlcz8ubGVuZ3RoKSB7XG5cdFx0bG9nZ2VyLndhcm4oJ05vIGltYWdlcyB3ZXJlIGdlbmVyYXRlZC4nKVxuXHRcdHJldHVybiAnTm8gaW1hZ2VzIHdlcmUgZ2VuZXJhdGVkLidcblx0fVxuXG5cdC8vIEZldGNoIGltYWdlIHVybCBhcyBidWZmZXIgdGhlbiByZXR1cm4gYXMgZmlsZVxuXHRjb25zdCBidWZmZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0aW1hZ2VzLm1hcChhc3luYyAoaW1hZ2UpID0+IHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaW1hZ2UpXG5cdFx0XHRyZXR1cm4gQnVmZmVyLmZyb20oYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKSlcblx0XHR9KVxuXHQpXG5cblx0cmV0dXJuIHtcblx0XHRmaWxlczogYnVmZmVyc1xuXHR9XG59XG4iXSwibmFtZXMiOlsiQUkiLCJsb2dnZXIiLCJjb25maWciLCJkZXNjcmlwdGlvbiIsIm9wdGlvbnMiLCJuYW1lIiwicmVxdWlyZWQiLCJpbnRlcmFjdGlvbiIsInByb21wdCIsImdldCIsInZhbHVlIiwicmVzcG9uc2UiLCJnZW5lcmF0ZUltYWdlIiwiaW1hZ2VzIiwibWFwIiwiaW1hZ2UiLCJ1cmwiLCJkZWJ1ZyIsImxlbmd0aCIsIndhcm4iLCJidWZmZXJzIiwiUHJvbWlzZSIsImFsbCIsImZldGNoIiwiQnVmZmVyIiwiZnJvbSIsImFycmF5QnVmZmVyIiwiZmlsZXMiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLEVBQUUsUUFBUSxrQ0FBYztBQUNqQyxTQUFTQyxNQUFNLFFBQVEsc0NBQWtCO0FBSXpDLE9BQU8sTUFBTUMsU0FBd0I7SUFDcENDLGFBQWE7SUFDYkMsU0FBUztRQUNSO1lBQ0NDLE1BQU07WUFDTkYsYUFBYTtZQUNiRyxVQUFVLElBQUk7UUFDZjtLQUNBO0FBQ0YsRUFBQztBQUVELGVBQWUsQ0FBQSxPQUFPQyxjQUE0RDtJQUNqRixNQUFNQyxTQUFTRCxZQUFZSCxPQUFPLENBQUNLLEdBQUcsQ0FBQyxXQUFXQztJQUVsRCxNQUFNQyxXQUFXLE1BQU1YLEdBQUdZLGFBQWEsQ0FBQztRQUFFSjtJQUFPO0lBQ2pELE1BQU1LLFNBQVNGLFVBQVVFLFFBQVFDLElBQUksQ0FBQ0MsUUFBVUEsTUFBTUMsR0FBRztJQUN6RGYsT0FBT2dCLEtBQUssQ0FBQyxDQUFDLFNBQVMsRUFBRUosUUFBUUssT0FBTyxRQUFRLENBQUMsRUFBRUw7SUFFbkQsSUFBSSxDQUFDQSxRQUFRSyxRQUFRO1FBQ3BCakIsT0FBT2tCLElBQUksQ0FBQztRQUNaLE9BQU87SUFDUixDQUFDO0lBRUQsZ0RBQWdEO0lBQ2hELE1BQU1DLFVBQVUsTUFBTUMsUUFBUUMsR0FBRyxDQUNoQ1QsT0FBT0MsR0FBRyxDQUFDLE9BQU9DLFFBQVU7UUFDM0IsTUFBTUosV0FBVyxNQUFNWSxNQUFNUjtRQUM3QixPQUFPUyxPQUFPQyxJQUFJLENBQUMsTUFBTWQsU0FBU2UsV0FBVztJQUM5QztJQUdELE9BQU87UUFDTkMsT0FBT1A7SUFDUjtBQUNELENBQUEsRUFBQyJ9