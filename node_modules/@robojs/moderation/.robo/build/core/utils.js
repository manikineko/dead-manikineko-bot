import { Modals, TextInputs } from './constants.js';
import { getSettings } from './settings.js';
import { client, logger, setState } from 'robo.js';
import { ChannelType, ComponentType, TextInputStyle } from 'discord.js';
const MAX_MESSAGES_PER_CHANNEL = 100;
const MAX_DELETIONS = 5;
const BATCH_FETCH_LIMIT = 20;
const MESSAGE_AGE_LIMIT_MS = 1_209_600_000 // 14 days in milliseconds
;
const RATE_LIMIT_DELAY_MS = 1_000 // Delay in milliseconds to avoid rate limits
;
// TODO: Delete based on time span instead of number of messages
export async function deleteRecentUserMessages(guild, targetUserId) {
    let deletedCount = 0;
    for (const channel of guild.channels.cache.values()){
        // Check if the channel is text-based and if the deletion count is less than the max deletions
        if (!channel.isTextBased() || deletedCount >= MAX_DELETIONS) {
            continue;
        }
        let fetchedCount = 0;
        let lastMessageId = null;
        // Fetch and process messages in batches until the limit is reached or enough messages are deleted
        while(fetchedCount < MAX_MESSAGES_PER_CHANNEL && deletedCount < MAX_DELETIONS){
            try {
                // Fetch messages with the specified limit and starting point
                const messages = await channel.messages.fetch({
                    before: lastMessageId ?? undefined,
                    limit: Math.min(BATCH_FETCH_LIMIT, MAX_MESSAGES_PER_CHANNEL - fetchedCount)
                });
                // Update the fetched count and check if there are messages to process
                fetchedCount += messages.size;
                if (messages.size === 0) {
                    break;
                }
                // Iterate over the fetched messages
                for (const message of messages.values()){
                    // Check if the message is from the target user and within the age limit
                    if (message.author.id === targetUserId && Date.now() - message.createdTimestamp < MESSAGE_AGE_LIMIT_MS) {
                        try {
                            await message.delete();
                            logger.debug(`Deleted message ${message.id} from channel ${channel.name}`);
                            deletedCount++;
                            // Break if the max number of deletions has been reached
                            if (deletedCount >= MAX_DELETIONS) {
                                break;
                            }
                            // Delay to avoid hitting rate limits
                            await new Promise((resolve)=>setTimeout(resolve, RATE_LIMIT_DELAY_MS));
                        } catch (error) {
                            logger.warn(`Error deleting message:`, error);
                        }
                    }
                    // Update the last message ID for the next batch fetch
                    lastMessageId = message.id;
                }
            } catch (error) {
                logger.warn(`Error fetching messages from channel ${channel.name}:`, error);
                break;
            }
        }
    }
    logger.debug(`Deleted ${deletedCount} messages from the user.`);
    return {
        deletedCount
    };
}
export async function logAction(guildId, message) {
    if (!guildId) {
        return;
    }
    const { logsChannelId  } = getSettings(guildId);
    if (!logsChannelId) {
        logger.debug(`Missing logs channel for guild ${guildId}`);
        return;
    }
    const guild = client.guilds.cache.get(guildId);
    const logsChannel = guild?.channels.cache.get(logsChannelId);
    if (!logsChannel || logsChannel.type !== ChannelType.GuildText) {
        logger.debug(`Invalid logs channel for guild ${guildId}`);
        return;
    }
    await logsChannel.send({
        components: message.components,
        content: message.content,
        embeds: message.embeds
    });
}
export function hasPermission(interaction, permission) {
    // Validate channel
    const channel = interaction.channel;
    if (!channel || !channel.isTextBased() || channel.isDMBased()) {
        return false;
    }
    // Add self to logs channel if needed
    const userId = interaction.member?.user?.id;
    if (!channel.permissionsFor(userId)?.has(permission)) {
        return false;
    }
    return true;
}
export async function isBanned(guild, userId) {
    try {
        const ban = await guild?.bans.fetch(userId);
        return !!ban;
    } catch (error) {
        return false;
    }
}
export async function showConfirmation(interaction, callback) {
    setState('modal-confirm', {
        callback
    }, {
        namespace: interaction.guildId + interaction.user.id
    });
    console.log(`Setting namespace:`, interaction.guildId + interaction.user.id);
    await interaction.showModal({
        title: 'Are you sure?',
        components: [
            {
                type: ComponentType.ActionRow,
                components: [
                    {
                        type: ComponentType.TextInput,
                        label: 'Type "yes" to confirm',
                        placeholder: 'yes',
                        minLength: 3,
                        maxLength: 3,
                        customId: TextInputs.Confirm.id,
                        style: TextInputStyle.Short
                    }
                ]
            }
        ],
        customId: Modals.Confirm.id
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL3JvYm8uanMvcm9iby5qcy9wYWNrYWdlcy9wbHVnaW4tbW9kdG9vbHMvc3JjL2NvcmUvdXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kYWxzLCBUZXh0SW5wdXRzIH0gZnJvbSAnLi9jb25zdGFudHMuanMnXG5pbXBvcnQgeyBnZXRTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MuanMnXG5pbXBvcnQgeyBjbGllbnQsIGxvZ2dlciwgc2V0U3RhdGUgfSBmcm9tICdyb2JvLmpzJ1xuaW1wb3J0IHsgQ2hhbm5lbFR5cGUsIENvbXBvbmVudFR5cGUsIFRleHRJbnB1dFN0eWxlIH0gZnJvbSAnZGlzY29yZC5qcydcbmltcG9ydCB0eXBlIHtcblx0TWVzc2FnZUNyZWF0ZU9wdGlvbnMsXG5cdENvbGxlY3Rpb24sXG5cdEd1aWxkLFxuXHRNZXNzYWdlLFxuXHRCYXNlSW50ZXJhY3Rpb24sXG5cdFBlcm1pc3Npb25SZXNvbHZhYmxlLFxuXHRDaGF0SW5wdXRDb21tYW5kSW50ZXJhY3Rpb24sXG5cdE1vZGFsU3VibWl0SW50ZXJhY3Rpb25cbn0gZnJvbSAnZGlzY29yZC5qcydcblxuY29uc3QgTUFYX01FU1NBR0VTX1BFUl9DSEFOTkVMID0gMTAwXG5jb25zdCBNQVhfREVMRVRJT05TID0gNVxuY29uc3QgQkFUQ0hfRkVUQ0hfTElNSVQgPSAyMFxuY29uc3QgTUVTU0FHRV9BR0VfTElNSVRfTVMgPSAxXzIwOV82MDBfMDAwIC8vIDE0IGRheXMgaW4gbWlsbGlzZWNvbmRzXG5jb25zdCBSQVRFX0xJTUlUX0RFTEFZX01TID0gMV8wMDAgLy8gRGVsYXkgaW4gbWlsbGlzZWNvbmRzIHRvIGF2b2lkIHJhdGUgbGltaXRzXG5cbi8vIFRPRE86IERlbGV0ZSBiYXNlZCBvbiB0aW1lIHNwYW4gaW5zdGVhZCBvZiBudW1iZXIgb2YgbWVzc2FnZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVSZWNlbnRVc2VyTWVzc2FnZXMoZ3VpbGQ6IEd1aWxkLCB0YXJnZXRVc2VySWQ6IHN0cmluZykge1xuXHRsZXQgZGVsZXRlZENvdW50ID0gMFxuXG5cdGZvciAoY29uc3QgY2hhbm5lbCBvZiBndWlsZC5jaGFubmVscy5jYWNoZS52YWx1ZXMoKSkge1xuXHRcdC8vIENoZWNrIGlmIHRoZSBjaGFubmVsIGlzIHRleHQtYmFzZWQgYW5kIGlmIHRoZSBkZWxldGlvbiBjb3VudCBpcyBsZXNzIHRoYW4gdGhlIG1heCBkZWxldGlvbnNcblx0XHRpZiAoIWNoYW5uZWwuaXNUZXh0QmFzZWQoKSB8fCBkZWxldGVkQ291bnQgPj0gTUFYX0RFTEVUSU9OUykge1xuXHRcdFx0Y29udGludWVcblx0XHR9XG5cblx0XHRsZXQgZmV0Y2hlZENvdW50ID0gMFxuXHRcdGxldCBsYXN0TWVzc2FnZUlkID0gbnVsbFxuXG5cdFx0Ly8gRmV0Y2ggYW5kIHByb2Nlc3MgbWVzc2FnZXMgaW4gYmF0Y2hlcyB1bnRpbCB0aGUgbGltaXQgaXMgcmVhY2hlZCBvciBlbm91Z2ggbWVzc2FnZXMgYXJlIGRlbGV0ZWRcblx0XHR3aGlsZSAoZmV0Y2hlZENvdW50IDwgTUFYX01FU1NBR0VTX1BFUl9DSEFOTkVMICYmIGRlbGV0ZWRDb3VudCA8IE1BWF9ERUxFVElPTlMpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIEZldGNoIG1lc3NhZ2VzIHdpdGggdGhlIHNwZWNpZmllZCBsaW1pdCBhbmQgc3RhcnRpbmcgcG9pbnRcblx0XHRcdFx0Y29uc3QgbWVzc2FnZXM6IENvbGxlY3Rpb248c3RyaW5nLCBNZXNzYWdlPHRydWU+PiA9IGF3YWl0IGNoYW5uZWwubWVzc2FnZXMuZmV0Y2goe1xuXHRcdFx0XHRcdGJlZm9yZTogbGFzdE1lc3NhZ2VJZCA/PyB1bmRlZmluZWQsXG5cdFx0XHRcdFx0bGltaXQ6IE1hdGgubWluKEJBVENIX0ZFVENIX0xJTUlULCBNQVhfTUVTU0FHRVNfUEVSX0NIQU5ORUwgLSBmZXRjaGVkQ291bnQpXG5cdFx0XHRcdH0pXG5cblx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBmZXRjaGVkIGNvdW50IGFuZCBjaGVjayBpZiB0aGVyZSBhcmUgbWVzc2FnZXMgdG8gcHJvY2Vzc1xuXHRcdFx0XHRmZXRjaGVkQ291bnQgKz0gbWVzc2FnZXMuc2l6ZVxuXHRcdFx0XHRpZiAobWVzc2FnZXMuc2l6ZSA9PT0gMCkge1xuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJdGVyYXRlIG92ZXIgdGhlIGZldGNoZWQgbWVzc2FnZXNcblx0XHRcdFx0Zm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzLnZhbHVlcygpKSB7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIG1lc3NhZ2UgaXMgZnJvbSB0aGUgdGFyZ2V0IHVzZXIgYW5kIHdpdGhpbiB0aGUgYWdlIGxpbWl0XG5cdFx0XHRcdFx0aWYgKG1lc3NhZ2UuYXV0aG9yLmlkID09PSB0YXJnZXRVc2VySWQgJiYgRGF0ZS5ub3coKSAtIG1lc3NhZ2UuY3JlYXRlZFRpbWVzdGFtcCA8IE1FU1NBR0VfQUdFX0xJTUlUX01TKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRhd2FpdCBtZXNzYWdlLmRlbGV0ZSgpXG5cdFx0XHRcdFx0XHRcdGxvZ2dlci5kZWJ1ZyhgRGVsZXRlZCBtZXNzYWdlICR7bWVzc2FnZS5pZH0gZnJvbSBjaGFubmVsICR7Y2hhbm5lbC5uYW1lfWApXG5cdFx0XHRcdFx0XHRcdGRlbGV0ZWRDb3VudCsrXG5cblx0XHRcdFx0XHRcdFx0Ly8gQnJlYWsgaWYgdGhlIG1heCBudW1iZXIgb2YgZGVsZXRpb25zIGhhcyBiZWVuIHJlYWNoZWRcblx0XHRcdFx0XHRcdFx0aWYgKGRlbGV0ZWRDb3VudCA+PSBNQVhfREVMRVRJT05TKSB7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIERlbGF5IHRvIGF2b2lkIGhpdHRpbmcgcmF0ZSBsaW1pdHNcblx0XHRcdFx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgUkFURV9MSU1JVF9ERUxBWV9NUykpXG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdFx0XHRsb2dnZXIud2FybihgRXJyb3IgZGVsZXRpbmcgbWVzc2FnZTpgLCBlcnJvcilcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIGxhc3QgbWVzc2FnZSBJRCBmb3IgdGhlIG5leHQgYmF0Y2ggZmV0Y2hcblx0XHRcdFx0XHRsYXN0TWVzc2FnZUlkID0gbWVzc2FnZS5pZFxuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRsb2dnZXIud2FybihgRXJyb3IgZmV0Y2hpbmcgbWVzc2FnZXMgZnJvbSBjaGFubmVsICR7Y2hhbm5lbC5uYW1lfTpgLCBlcnJvcilcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRsb2dnZXIuZGVidWcoYERlbGV0ZWQgJHtkZWxldGVkQ291bnR9IG1lc3NhZ2VzIGZyb20gdGhlIHVzZXIuYClcblx0cmV0dXJuIHsgZGVsZXRlZENvdW50IH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0FjdGlvbihndWlsZElkOiBzdHJpbmcgfCBudWxsLCBtZXNzYWdlOiBNZXNzYWdlQ3JlYXRlT3B0aW9ucykge1xuXHRpZiAoIWd1aWxkSWQpIHtcblx0XHRyZXR1cm5cblx0fVxuXG5cdGNvbnN0IHsgbG9nc0NoYW5uZWxJZCB9ID0gZ2V0U2V0dGluZ3MoZ3VpbGRJZClcblx0aWYgKCFsb2dzQ2hhbm5lbElkKSB7XG5cdFx0bG9nZ2VyLmRlYnVnKGBNaXNzaW5nIGxvZ3MgY2hhbm5lbCBmb3IgZ3VpbGQgJHtndWlsZElkfWApXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRjb25zdCBndWlsZCA9IGNsaWVudC5ndWlsZHMuY2FjaGUuZ2V0KGd1aWxkSWQpXG5cdGNvbnN0IGxvZ3NDaGFubmVsID0gZ3VpbGQ/LmNoYW5uZWxzLmNhY2hlLmdldChsb2dzQ2hhbm5lbElkKVxuXHRpZiAoIWxvZ3NDaGFubmVsIHx8IGxvZ3NDaGFubmVsLnR5cGUgIT09IENoYW5uZWxUeXBlLkd1aWxkVGV4dCkge1xuXHRcdGxvZ2dlci5kZWJ1ZyhgSW52YWxpZCBsb2dzIGNoYW5uZWwgZm9yIGd1aWxkICR7Z3VpbGRJZH1gKVxuXHRcdHJldHVyblxuXHR9XG5cblx0YXdhaXQgbG9nc0NoYW5uZWwuc2VuZCh7XG5cdFx0Y29tcG9uZW50czogbWVzc2FnZS5jb21wb25lbnRzLFxuXHRcdGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCxcblx0XHRlbWJlZHM6IG1lc3NhZ2UuZW1iZWRzXG5cdH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKGludGVyYWN0aW9uOiBCYXNlSW50ZXJhY3Rpb24sIHBlcm1pc3Npb246IFBlcm1pc3Npb25SZXNvbHZhYmxlKTogYm9vbGVhbiB7XG5cdC8vIFZhbGlkYXRlIGNoYW5uZWxcblx0Y29uc3QgY2hhbm5lbCA9IGludGVyYWN0aW9uLmNoYW5uZWxcblx0aWYgKCFjaGFubmVsIHx8ICFjaGFubmVsLmlzVGV4dEJhc2VkKCkgfHwgY2hhbm5lbC5pc0RNQmFzZWQoKSkge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG5cblx0Ly8gQWRkIHNlbGYgdG8gbG9ncyBjaGFubmVsIGlmIG5lZWRlZFxuXHRjb25zdCB1c2VySWQgPSBpbnRlcmFjdGlvbi5tZW1iZXI/LnVzZXI/LmlkIGFzIHN0cmluZ1xuXHRpZiAoIWNoYW5uZWwucGVybWlzc2lvbnNGb3IodXNlcklkKT8uaGFzKHBlcm1pc3Npb24pKSB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cblxuXHRyZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNCYW5uZWQoZ3VpbGQ6IEd1aWxkLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IGJhbiA9IGF3YWl0IGd1aWxkPy5iYW5zLmZldGNoKHVzZXJJZClcblx0XHRyZXR1cm4gISFiYW5cblx0fSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcblx0XHRyZXR1cm4gZmFsc2Vcblx0fVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hvd0NvbmZpcm1hdGlvbihcblx0aW50ZXJhY3Rpb246IENoYXRJbnB1dENvbW1hbmRJbnRlcmFjdGlvbixcblx0Y2FsbGJhY2s6IChpbnRlcmFjdGlvbjogTW9kYWxTdWJtaXRJbnRlcmFjdGlvbikgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWRcbikge1xuXHRzZXRTdGF0ZShcblx0XHQnbW9kYWwtY29uZmlybScsXG5cdFx0eyBjYWxsYmFjayB9LFxuXHRcdHtcblx0XHRcdG5hbWVzcGFjZTogaW50ZXJhY3Rpb24uZ3VpbGRJZCArIGludGVyYWN0aW9uLnVzZXIuaWRcblx0XHR9XG5cdClcblx0Y29uc29sZS5sb2coYFNldHRpbmcgbmFtZXNwYWNlOmAsIGludGVyYWN0aW9uLmd1aWxkSWQgKyBpbnRlcmFjdGlvbi51c2VyLmlkKVxuXG5cdGF3YWl0IGludGVyYWN0aW9uLnNob3dNb2RhbCh7XG5cdFx0dGl0bGU6ICdBcmUgeW91IHN1cmU/Jyxcblx0XHRjb21wb25lbnRzOiBbXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IENvbXBvbmVudFR5cGUuQWN0aW9uUm93LFxuXHRcdFx0XHRjb21wb25lbnRzOiBbXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dHlwZTogQ29tcG9uZW50VHlwZS5UZXh0SW5wdXQsXG5cdFx0XHRcdFx0XHRsYWJlbDogJ1R5cGUgXCJ5ZXNcIiB0byBjb25maXJtJyxcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAneWVzJyxcblx0XHRcdFx0XHRcdG1pbkxlbmd0aDogMyxcblx0XHRcdFx0XHRcdG1heExlbmd0aDogMyxcblx0XHRcdFx0XHRcdGN1c3RvbUlkOiBUZXh0SW5wdXRzLkNvbmZpcm0uaWQsXG5cdFx0XHRcdFx0XHRzdHlsZTogVGV4dElucHV0U3R5bGUuU2hvcnRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdF1cblx0XHRcdH1cblx0XHRdLFxuXHRcdGN1c3RvbUlkOiBNb2RhbHMuQ29uZmlybS5pZFxuXHR9KVxufVxuIl0sIm5hbWVzIjpbIk1vZGFscyIsIlRleHRJbnB1dHMiLCJnZXRTZXR0aW5ncyIsImNsaWVudCIsImxvZ2dlciIsInNldFN0YXRlIiwiQ2hhbm5lbFR5cGUiLCJDb21wb25lbnRUeXBlIiwiVGV4dElucHV0U3R5bGUiLCJNQVhfTUVTU0FHRVNfUEVSX0NIQU5ORUwiLCJNQVhfREVMRVRJT05TIiwiQkFUQ0hfRkVUQ0hfTElNSVQiLCJNRVNTQUdFX0FHRV9MSU1JVF9NUyIsIlJBVEVfTElNSVRfREVMQVlfTVMiLCJkZWxldGVSZWNlbnRVc2VyTWVzc2FnZXMiLCJndWlsZCIsInRhcmdldFVzZXJJZCIsImRlbGV0ZWRDb3VudCIsImNoYW5uZWwiLCJjaGFubmVscyIsImNhY2hlIiwidmFsdWVzIiwiaXNUZXh0QmFzZWQiLCJmZXRjaGVkQ291bnQiLCJsYXN0TWVzc2FnZUlkIiwibWVzc2FnZXMiLCJmZXRjaCIsImJlZm9yZSIsInVuZGVmaW5lZCIsImxpbWl0IiwiTWF0aCIsIm1pbiIsInNpemUiLCJtZXNzYWdlIiwiYXV0aG9yIiwiaWQiLCJEYXRlIiwibm93IiwiY3JlYXRlZFRpbWVzdGFtcCIsImRlbGV0ZSIsImRlYnVnIiwibmFtZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImVycm9yIiwid2FybiIsImxvZ0FjdGlvbiIsImd1aWxkSWQiLCJsb2dzQ2hhbm5lbElkIiwiZ3VpbGRzIiwiZ2V0IiwibG9nc0NoYW5uZWwiLCJ0eXBlIiwiR3VpbGRUZXh0Iiwic2VuZCIsImNvbXBvbmVudHMiLCJjb250ZW50IiwiZW1iZWRzIiwiaGFzUGVybWlzc2lvbiIsImludGVyYWN0aW9uIiwicGVybWlzc2lvbiIsImlzRE1CYXNlZCIsInVzZXJJZCIsIm1lbWJlciIsInVzZXIiLCJwZXJtaXNzaW9uc0ZvciIsImhhcyIsImlzQmFubmVkIiwiYmFuIiwiYmFucyIsInNob3dDb25maXJtYXRpb24iLCJjYWxsYmFjayIsIm5hbWVzcGFjZSIsImNvbnNvbGUiLCJsb2ciLCJzaG93TW9kYWwiLCJ0aXRsZSIsIkFjdGlvblJvdyIsIlRleHRJbnB1dCIsImxhYmVsIiwicGxhY2Vob2xkZXIiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJjdXN0b21JZCIsIkNvbmZpcm0iLCJzdHlsZSIsIlNob3J0Il0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxNQUFNLEVBQUVDLFVBQVUsUUFBUSxpQkFBZ0I7QUFDbkQsU0FBU0MsV0FBVyxRQUFRLGdCQUFlO0FBQzNDLFNBQVNDLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxRQUFRLFFBQVEsVUFBUztBQUNsRCxTQUFTQyxXQUFXLEVBQUVDLGFBQWEsRUFBRUMsY0FBYyxRQUFRLGFBQVk7QUFZdkUsTUFBTUMsMkJBQTJCO0FBQ2pDLE1BQU1DLGdCQUFnQjtBQUN0QixNQUFNQyxvQkFBb0I7QUFDMUIsTUFBTUMsdUJBQXVCLGNBQWMsMEJBQTBCOztBQUNyRSxNQUFNQyxzQkFBc0IsTUFBTSw2Q0FBNkM7O0FBRS9FLGdFQUFnRTtBQUNoRSxPQUFPLGVBQWVDLHlCQUF5QkMsS0FBWSxFQUFFQyxZQUFvQixFQUFFO0lBQ2xGLElBQUlDLGVBQWU7SUFFbkIsS0FBSyxNQUFNQyxXQUFXSCxNQUFNSSxRQUFRLENBQUNDLEtBQUssQ0FBQ0MsTUFBTSxHQUFJO1FBQ3BELDhGQUE4RjtRQUM5RixJQUFJLENBQUNILFFBQVFJLFdBQVcsTUFBTUwsZ0JBQWdCUCxlQUFlO1lBQzVELFFBQVE7UUFDVCxDQUFDO1FBRUQsSUFBSWEsZUFBZTtRQUNuQixJQUFJQyxnQkFBZ0IsSUFBSTtRQUV4QixrR0FBa0c7UUFDbEcsTUFBT0QsZUFBZWQsNEJBQTRCUSxlQUFlUCxjQUFlO1lBQy9FLElBQUk7Z0JBQ0gsNkRBQTZEO2dCQUM3RCxNQUFNZSxXQUE4QyxNQUFNUCxRQUFRTyxRQUFRLENBQUNDLEtB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