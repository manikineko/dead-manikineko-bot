import { createSetupMessage } from '../../commands/mod/setup.js';
import { Buttons, Selects } from '../../core/constants.js';
import { hasPermission, logAction } from '../../core/utils.js';
import { getSettings, updateSettings } from '../../core/settings.js';
import { client, logger, setState } from 'robo.js';
import { ChannelType, PermissionFlagsBits, Colors, ComponentType } from 'discord.js';
export const config = {
    description: `Creates moderator channels when the setup button is clicked`
};
export default (async (interaction)=>{
    // Only handle interaction meant for this file
    if (!interaction.isButton() || interaction.customId !== Buttons.CreateChannels.id) {
        return;
    }
    await interaction.deferUpdate();
    // Validate permissions
    if (!hasPermission(interaction, 'ModerateMembers')) {
        logger.debug(`User @${interaction.user.username} does not have permission to create moderation channels`);
        return interaction.followUp({
            content: `You don't have permission to use this.`,
            ephemeral: true
        });
    }
    // Validate guild
    if (!interaction.guild) {
        logger.warn(`Interaction ${interaction.id} is missing guild`);
        await interaction.followUp({
            content: 'This command can only be used in a server.',
            ephemeral: true
        });
        return;
    }
    // Create moderator channels
    logger.debug(`Creating moderator channels for guild ${interaction.guildId}`);
    const channelsCreated = [];
    let { logsChannelId , mailChannelId  } = getSettings(interaction.guildId);
    if (!logsChannelId) {
        const logsChannel = await createChannel(interaction, 'moderator-logs', 'Moderation actions will be logged here.');
        logsChannelId = logsChannel.id;
        channelsCreated.push(logsChannel);
    }
    if (!mailChannelId) {
        const mailChannel = await createChannel(interaction, 'moderator-mail', 'Reports and appeals will be sent here.');
        mailChannelId = mailChannel.id;
        channelsCreated.push(mailChannel);
    }
    // Update settings
    const newSettings = updateSettings(interaction.guildId, {
        logsChannelId,
        mailChannelId
    });
    // Update setup message
    const setupMessage = createSetupMessage(interaction, newSettings);
    await interaction.editReply({
        content: setupMessage.content,
        components: setupMessage.components
    });
    setState('modchannels-created', channelsCreated, {
        namespace: interaction.guildId + '-' + interaction.user.id
    });
    // Send confirmation
    await interaction.followUp({
        content: `Missing moderator channels have been created!\n${channelsCreated.join('\n')}\n\nYou should update channel permissions to allow your moderators to view them, or you can select them below.`,
        ephemeral: true,
        components: [
            {
                type: ComponentType.ActionRow,
                components: [
                    {
                        type: ComponentType.RoleSelect,
                        placeholder: 'Select a role to allow access to moderator channels',
                        custom_id: Selects.ModChannelRoles.id,
                        min_values: 0,
                        max_values: 25
                    }
                ]
            }
        ]
    });
});
async function createChannel(interaction, channelName, channelTopic) {
    const guild = interaction.guild;
    const permissions = [
        {
            id: guild.roles.everyone.id,
            deny: [
                PermissionFlagsBits.ViewChannel
            ]
        },
        {
            id: guild.ownerId,
            allow: [
                PermissionFlagsBits.ViewChannel
            ]
        },
        {
            id: client.user?.id,
            allow: [
                PermissionFlagsBits.ViewChannel
            ]
        }
    ];
    const moderatorRole = guild.roles.cache.find((role)=>role.name.toLowerCase().includes('moderator'));
    if (moderatorRole) {
        permissions.push({
            id: moderatorRole.id,
            allow: [
                PermissionFlagsBits.ViewChannel
            ]
        });
    }
    if (interaction.member?.user?.id) {
        permissions.push({
            id: interaction.member.user.id,
            allow: [
                PermissionFlagsBits.ViewChannel
            ]
        });
    }
    const createdChannel = await guild.channels.create({
        name: channelName,
        topic: channelTopic,
        permissionOverwrites: permissions,
        type: ChannelType.GuildText
    });
    // Log action to modlogs channel
    logger.debug(`Created moderator channel #${createdChannel.name} for guild ${interaction.guildId}`);
    logAction(interaction.guildId, {
        embeds: [
            {
                title: 'Moderator channel created',
                description: `${createdChannel} has been created`,
                color: Colors.Blurple,
                timestamp: new Date().toISOString(),
                footer: {
                    icon_url: interaction.user.displayAvatarURL(),
                    text: 'by @' + interaction.user.username
                }
            }
        ]
    });
    return createdChannel;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL3JvYm8uanMvcm9iby5qcy9wYWNrYWdlcy9wbHVnaW4tbW9kdG9vbHMvc3JjL2V2ZW50cy9pbnRlcmFjdGlvbkNyZWF0ZS9idXR0b24tc2V0dXAtY3JlYXRlY2hhbm5lbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2V0dXBNZXNzYWdlIH0gZnJvbSAnLi4vLi4vY29tbWFuZHMvbW9kL3NldHVwLmpzJ1xuaW1wb3J0IHsgQnV0dG9ucywgU2VsZWN0cyB9IGZyb20gJy4uLy4uL2NvcmUvY29uc3RhbnRzLmpzJ1xuaW1wb3J0IHsgaGFzUGVybWlzc2lvbiwgbG9nQWN0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS91dGlscy5qcydcbmltcG9ydCB7IGdldFNldHRpbmdzLCB1cGRhdGVTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2NvcmUvc2V0dGluZ3MuanMnXG5pbXBvcnQgeyBjbGllbnQsIGxvZ2dlciwgc2V0U3RhdGUgfSBmcm9tICdyb2JvLmpzJ1xuaW1wb3J0IHsgQ2hhbm5lbFR5cGUsIFBlcm1pc3Npb25GbGFnc0JpdHMsIENvbG9ycywgQ29tcG9uZW50VHlwZSB9IGZyb20gJ2Rpc2NvcmQuanMnXG5pbXBvcnQgdHlwZSB7IEV2ZW50Q29uZmlnIH0gZnJvbSAncm9iby5qcydcbmltcG9ydCB0eXBlIHsgQmFzZUludGVyYWN0aW9uLCBCdXR0b25JbnRlcmFjdGlvbiwgR3VpbGQsIE92ZXJ3cml0ZVJlc29sdmFibGUgfSBmcm9tICdkaXNjb3JkLmpzJ1xuXG5leHBvcnQgY29uc3QgY29uZmlnOiBFdmVudENvbmZpZyA9IHtcblx0ZGVzY3JpcHRpb246IGBDcmVhdGVzIG1vZGVyYXRvciBjaGFubmVscyB3aGVuIHRoZSBzZXR1cCBidXR0b24gaXMgY2xpY2tlZGBcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKGludGVyYWN0aW9uOiBCdXR0b25JbnRlcmFjdGlvbikgPT4ge1xuXHQvLyBPbmx5IGhhbmRsZSBpbnRlcmFjdGlvbiBtZWFudCBmb3IgdGhpcyBmaWxlXG5cdGlmICghaW50ZXJhY3Rpb24uaXNCdXR0b24oKSB8fCBpbnRlcmFjdGlvbi5jdXN0b21JZCAhPT0gQnV0dG9ucy5DcmVhdGVDaGFubmVscy5pZCkge1xuXHRcdHJldHVyblxuXHR9XG5cdGF3YWl0IGludGVyYWN0aW9uLmRlZmVyVXBkYXRlKClcblxuXHQvLyBWYWxpZGF0ZSBwZXJtaXNzaW9uc1xuXHRpZiAoIWhhc1Blcm1pc3Npb24oaW50ZXJhY3Rpb24sICdNb2RlcmF0ZU1lbWJlcnMnKSkge1xuXHRcdGxvZ2dlci5kZWJ1ZyhgVXNlciBAJHtpbnRlcmFjdGlvbi51c2VyLnVzZXJuYW1lfSBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gY3JlYXRlIG1vZGVyYXRpb24gY2hhbm5lbHNgKVxuXHRcdHJldHVybiBpbnRlcmFjdGlvbi5mb2xsb3dVcCh7XG5cdFx0XHRjb250ZW50OiBgWW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byB1c2UgdGhpcy5gLFxuXHRcdFx0ZXBoZW1lcmFsOiB0cnVlXG5cdFx0fSlcblx0fVxuXG5cdC8vIFZhbGlkYXRlIGd1aWxkXG5cdGlmICghaW50ZXJhY3Rpb24uZ3VpbGQpIHtcblx0XHRsb2dnZXIud2FybihgSW50ZXJhY3Rpb24gJHtpbnRlcmFjdGlvbi5pZH0gaXMgbWlzc2luZyBndWlsZGApXG5cdFx0YXdhaXQgaW50ZXJhY3Rpb24uZm9sbG93VXAoe1xuXHRcdFx0Y29udGVudDogJ1RoaXMgY29tbWFuZCBjYW4gb25seSBiZSB1c2VkIGluIGEgc2VydmVyLicsXG5cdFx0XHRlcGhlbWVyYWw6IHRydWVcblx0XHR9KVxuXHRcdHJldHVyblxuXHR9XG5cblx0Ly8gQ3JlYXRlIG1vZGVyYXRvciBjaGFubmVsc1xuXHRsb2dnZXIuZGVidWcoYENyZWF0aW5nIG1vZGVyYXRvciBjaGFubmVscyBmb3IgZ3VpbGQgJHtpbnRlcmFjdGlvbi5ndWlsZElkfWApXG5cdGNvbnN0IGNoYW5uZWxzQ3JlYXRlZCA9IFtdXG5cdGxldCB7IGxvZ3NDaGFubmVsSWQsIG1haWxDaGFubmVsSWQgfSA9IGdldFNldHRpbmdzKGludGVyYWN0aW9uLmd1aWxkSWQpXG5cdGlmICghbG9nc0NoYW5uZWxJZCkge1xuXHRcdGNvbnN0IGxvZ3NDaGFubmVsID0gYXdhaXQgY3JlYXRlQ2hhbm5lbChpbnRlcmFjdGlvbiwgJ21vZGVyYXRvci1sb2dzJywgJ01vZGVyYXRpb24gYWN0aW9ucyB3aWxsIGJlIGxvZ2dlZCBoZXJlLicpXG5cdFx0bG9nc0NoYW5uZWxJZCA9IGxvZ3NDaGFubmVsLmlkXG5cdFx0Y2hhbm5lbHNDcmVhdGVkLnB1c2gobG9nc0NoYW5uZWwpXG5cdH1cblx0aWYgKCFtYWlsQ2hhbm5lbElkKSB7XG5cdFx0Y29uc3QgbWFpbENoYW5uZWwgPSBhd2FpdCBjcmVhdGVDaGFubmVsKGludGVyYWN0aW9uLCAnbW9kZXJhdG9yLW1haWwnLCAnUmVwb3J0cyBhbmQgYXBwZWFscyB3aWxsIGJlIHNlbnQgaGVyZS4nKVxuXHRcdG1haWxDaGFubmVsSWQgPSBtYWlsQ2hhbm5lbC5pZFxuXHRcdGNoYW5uZWxzQ3JlYXRlZC5wdXNoKG1haWxDaGFubmVsKVxuXHR9XG5cblx0Ly8gVXBkYXRlIHNldHRpbmdzXG5cdGNvbnN0IG5ld1NldHRpbmdzID0gdXBkYXRlU2V0dGluZ3MoaW50ZXJhY3Rpb24uZ3VpbGRJZCwge1xuXHRcdGxvZ3NDaGFubmVsSWQsXG5cdFx0bWFpbENoYW5uZWxJZFxuXHR9KVxuXG5cdC8vIFVwZGF0ZSBzZXR1cCBtZXNzYWdlXG5cdGNvbnN0IHNldHVwTWVzc2FnZSA9IGNyZWF0ZVNldHVwTWVzc2FnZShpbnRlcmFjdGlvbiwgbmV3U2V0dGluZ3MpXG5cdGF3YWl0IGludGVyYWN0aW9uLmVkaXRSZXBseSh7XG5cdFx0Y29udGVudDogc2V0dXBNZXNzYWdlLmNvbnRlbnQsXG5cdFx0Y29tcG9uZW50czogc2V0dXBNZXNzYWdlLmNvbXBvbmVudHNcblx0fSlcblx0c2V0U3RhdGUoJ21vZGNoYW5uZWxzLWNyZWF0ZWQnLCBjaGFubmVsc0NyZWF0ZWQsIHtcblx0XHRuYW1lc3BhY2U6IGludGVyYWN0aW9uLmd1aWxkSWQgKyAnLScgKyBpbnRlcmFjdGlvbi51c2VyLmlkXG5cdH0pXG5cblx0Ly8gU2VuZCBjb25maXJtYXRpb25cblx0YXdhaXQgaW50ZXJhY3Rpb24uZm9sbG93VXAoe1xuXHRcdGNvbnRlbnQ6IGBNaXNzaW5nIG1vZGVyYXRvciBjaGFubmVscyBoYXZlIGJlZW4gY3JlYXRlZCFcXG4ke2NoYW5uZWxzQ3JlYXRlZC5qb2luKFxuXHRcdFx0J1xcbidcblx0XHQpfVxcblxcbllvdSBzaG91bGQgdXBkYXRlIGNoYW5uZWwgcGVybWlzc2lvbnMgdG8gYWxsb3cgeW91ciBtb2RlcmF0b3JzIHRvIHZpZXcgdGhlbSwgb3IgeW91IGNhbiBzZWxlY3QgdGhlbSBiZWxvdy5gLFxuXHRcdGVwaGVtZXJhbDogdHJ1ZSxcblx0XHRjb21wb25lbnRzOiBbXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IENvbXBvbmVudFR5cGUuQWN0aW9uUm93LFxuXHRcdFx0XHRjb21wb25lbnRzOiBbXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dHlwZTogQ29tcG9uZW50VHlwZS5Sb2xlU2VsZWN0LFxuXHRcdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgYSByb2xlIHRvIGFsbG93IGFjY2VzcyB0byBtb2RlcmF0b3IgY2hhbm5lbHMnLFxuXHRcdFx0XHRcdFx0Y3VzdG9tX2lkOiBTZWxlY3RzLk1vZENoYW5uZWxSb2xlcy5pZCxcblx0XHRcdFx0XHRcdG1pbl92YWx1ZXM6IDAsXG5cdFx0XHRcdFx0XHRtYXhfdmFsdWVzOiAyNVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XVxuXHRcdFx0fVxuXHRcdF1cblx0fSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2hhbm5lbChpbnRlcmFjdGlvbjogQmFzZUludGVyYWN0aW9uLCBjaGFubmVsTmFtZTogc3RyaW5nLCBjaGFubmVsVG9waWM/OiBzdHJpbmcpIHtcblx0Y29uc3QgZ3VpbGQgPSBpbnRlcmFjdGlvbi5ndWlsZCBhcyBHdWlsZFxuXHRjb25zdCBwZXJtaXNzaW9uczogT3ZlcndyaXRlUmVzb2x2YWJsZVtdID0gW1xuXHRcdHtcblx0XHRcdGlkOiBndWlsZC5yb2xlcy5ldmVyeW9uZS5pZCxcblx0XHRcdGRlbnk6IFtQZXJtaXNzaW9uRmxhZ3NCaXRzLlZpZXdDaGFubmVsXVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0aWQ6IGd1aWxkLm93bmVySWQsXG5cdFx0XHRhbGxvdzogW1Blcm1pc3Npb25GbGFnc0JpdHMuVmlld0NoYW5uZWxdXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRpZDogY2xpZW50LnVzZXI/LmlkIGFzIHN0cmluZyxcblx0XHRcdGFsbG93OiBbUGVybWlzc2lvbkZsYWdzQml0cy5WaWV3Q2hhbm5lbF1cblx0XHR9XG5cdF1cblx0Y29uc3QgbW9kZXJhdG9yUm9sZSA9IGd1aWxkLnJvbGVzLmNhY2hlLmZpbmQoKHJvbGUpID0+IHJvbGUubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtb2RlcmF0b3InKSlcblx0aWYgKG1vZGVyYXRvclJvbGUpIHtcblx0XHRwZXJtaXNzaW9ucy5wdXNoKHtcblx0XHRcdGlkOiBtb2RlcmF0b3JSb2xlLmlkLFxuXHRcdFx0YWxsb3c6IFtQZXJtaXNzaW9uRmxhZ3NCaXRzLlZpZXdDaGFubmVsXVxuXHRcdH0pXG5cdH1cblx0aWYgKGludGVyYWN0aW9uLm1lbWJlcj8udXNlcj8uaWQpIHtcblx0XHRwZXJtaXNzaW9ucy5wdXNoKHtcblx0XHRcdGlkOiBpbnRlcmFjdGlvbi5tZW1iZXIudXNlci5pZCxcblx0XHRcdGFsbG93OiBbUGVybWlzc2lvbkZsYWdzQml0cy5WaWV3Q2hhbm5lbF1cblx0XHR9KVxuXHR9XG5cblx0Y29uc3QgY3JlYXRlZENoYW5uZWwgPSBhd2FpdCBndWlsZC5jaGFubmVscy5jcmVhdGUoe1xuXHRcdG5hbWU6IGNoYW5uZWxOYW1lLFxuXHRcdHRvcGljOiBjaGFubmVsVG9waWMsXG5cdFx0cGVybWlzc2lvbk92ZXJ3cml0ZXM6IHBlcm1pc3Npb25zLFxuXHRcdHR5cGU6IENoYW5uZWxUeXBlLkd1aWxkVGV4dFxuXHR9KVxuXG5cdC8vIExvZyBhY3Rpb24gdG8gbW9kbG9ncyBjaGFubmVsXG5cdGxvZ2dlci5kZWJ1ZyhgQ3JlYXRlZCBtb2RlcmF0b3IgY2hhbm5lbCAjJHtjcmVhdGVkQ2hhbm5lbC5uYW1lfSBmb3IgZ3VpbGQgJHtpbnRlcmFjdGlvbi5ndWlsZElkfWApXG5cdGxvZ0FjdGlvbihpbnRlcmFjdGlvbi5ndWlsZElkLCB7XG5cdFx0ZW1iZWRzOiBbXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlOiAnTW9kZXJhdG9yIGNoYW5uZWwgY3JlYXRlZCcsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBgJHtjcmVhdGVkQ2hhbm5lbH0gaGFzIGJlZW4gY3JlYXRlZGAsXG5cdFx0XHRcdGNvbG9yOiBDb2xvcnMuQmx1cnBsZSxcblx0XHRcdFx0dGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHRcdGZvb3Rlcjoge1xuXHRcdFx0XHRcdGljb25fdXJsOiBpbnRlcmFjdGlvbi51c2VyLmRpc3BsYXlBdmF0YXJVUkwoKSxcblx0XHRcdFx0XHR0ZXh0OiAnYnkgQCcgKyBpbnRlcmFjdGlvbi51c2VyLnVzZXJuYW1lXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRdXG5cdH0pXG5cblx0cmV0dXJuIGNyZWF0ZWRDaGFubmVsXG59XG4iXSwibmFtZXMiOlsiY3JlYXRlU2V0dXBNZXNzYWdlIiwiQnV0dG9ucyIsIlNlbGVjdHMiLCJoYXNQZXJtaXNzaW9uIiwibG9nQWN0aW9uIiwiZ2V0U2V0dGluZ3MiLCJ1cGRhdGVTZXR0aW5ncyIsImNsaWVudCIsImxvZ2dlciIsInNldFN0YXRlIiwiQ2hhbm5lbFR5cGUiLCJQZXJtaXNzaW9uRmxhZ3NCaXRzIiwiQ29sb3JzIiwiQ29tcG9uZW50VHlwZSIsImNvbmZpZyIsImRlc2NyaXB0aW9uIiwiaW50ZXJhY3Rpb24iLCJpc0J1dHRvbiIsImN1c3RvbUlkIiwiQ3JlYXRlQ2hhbm5lbHMiLCJpZCIsImRlZmVyVXBkYXRlIiwiZGVidWciLCJ1c2VyIiwidXNlcm5hbWUiLCJmb2xsb3dVcCIsImNvbnRlbnQiLCJlcGhlbWVyYWwiLCJndWlsZCIsIndhcm4iLCJndWlsZElkIiwiY2hhbm5lbHNDcmVhdGVkIiwibG9nc0NoYW5uZWxJZCIsIm1haWxDaGFubmVsSWQiLCJsb2dzQ2hhbm5lbCIsImNyZWF0ZUNoYW5uZWwiLCJwdXNoIiwibWFpbENoYW5uZWwiLCJuZXdTZXR0aW5ncyIsInNldHVwTWVzc2FnZSIsImVkaXRSZXBseSIsImNvbXBvbmVudHMiLCJuYW1lc3BhY2UiLCJqb2luIiwidHlwZSIsIkFjdGlvblJvdyIsIlJvbGVTZWxlY3QiLCJwbGFjZWhvbGRlciIsImN1c3RvbV9pZCIsIk1vZENoYW5uZWxSb2xlcyIsIm1pbl92YWx1ZXMiLCJtYXhfdmFsdWVzIiwiY2hhbm5lbE5hbWUiLCJjaGFubmVsVG9waWMiLCJwZXJtaXNzaW9ucyIsInJvbGVzIiwiZXZlcnlvbmUiLCJkZW55IiwiVmlld0NoYW5uZWwiLCJvd25lcklkIiwiYWxsb3ciLCJtb2RlcmF0b3JSb2xlIiwiY2FjaGUiLCJmaW5kIiwicm9sZSIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwibWVtYmVyIiwiY3JlYXRlZENoYW5uZWwiLCJjaGFubmVscyIsImNyZWF0ZSIsInRvcGljIiwicGVybWlzc2lvbk92ZXJ3cml0ZXMiLCJHdWlsZFRleHQiLCJlbWJlZHMiLCJ0aXRsZSIsImNvbG9yIiwiQmx1cnBsZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImZvb3RlciIsImljb25fdXJsIiwiZGlzcGxheUF2YXRhclVSTCIsInRleHQiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLGtCQUFrQixRQUFRLDhCQUE2QjtBQUNoRSxTQUFTQyxPQUFPLEVBQUVDLE9BQU8sUUFBUSwwQkFBeUI7QUFDMUQsU0FBU0MsYUFBYSxFQUFFQyxTQUFTLFFBQVEsc0JB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